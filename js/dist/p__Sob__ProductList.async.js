(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[33],{KKPO:function(e,a,t){e.exports={wrapper:"antd-pro-pages-sob-product-list-wrapper",lonelyPagination:"antd-pro-pages-sob-product-list-lonelyPagination",mappingPagination:"antd-pro-pages-sob-product-list-mappingPagination"}},"OgD/":function(e,a,t){"use strict";t.r(a);t("IzEo");var n,l,i,r,o=t("bx4M"),c=(t("DjyN"),t("NUBc")),s=(t("g9YV"),t("wCAj")),d=(t("+L6B"),t("2/Rp")),p=(t("6UJt"),t("DFOY")),m=(t("5NDa"),t("5rEg")),u=(t("jCWc"),t("kPKH")),g=t("p0pE"),h=t.n(g),f=t("2Taf"),y=t.n(f),E=t("vZ4D"),b=t.n(E),P=t("l4Ni"),S=t.n(P),k=t("ujKo"),v=t.n(k),I=t("MhPg"),L=t.n(I),w=(t("2qtc"),t("kLXV")),C=(t("14J3"),t("BMrR")),O=(t("sRBo"),t("kaz8")),z=(t("y8nQ"),t("Vl3Y")),x=(t("OaEy"),t("2fM7")),M=(t("Znn+"),t("ZTPi")),F=t("q1tI"),V=t.n(F),T=t("MuoO"),D=t("mOP9"),K=t("zHco"),N=t("KKPO"),J=t.n(N),j=t("X4Mq"),A=M["a"].TabPane,B=x["a"].Option,H=z["a"].Item,R=z["a"].create()(function(e){var a=e.modalVisible,t=e.selectList,n=e.form,l=e.handleModalOk,i=e.handleModalCancel,r=function(){n.validateFields(function(e,a){e||l(a)})},o=function(){n.resetFields(),i()};return V.a.createElement(w["a"],{destroyOnClose:!0,title:"\u6dfb\u52a0\u5339\u914d\u5173\u7cfb",visible:a,onOk:r,onCancel:o},t&&t.length>0?V.a.createElement(H,null,n.getFieldDecorator("productId",{initialValue:[]})(V.a.createElement(O["a"].Group,null,t.map(function(e){return V.a.createElement(C["a"],{key:e.productId},V.a.createElement(O["a"],{value:e.productId},j["a"][e.platform],"\uff1a",e.title))})))):V.a.createElement("div",{style:{textAlign:"center"}},"\u65e0\u53ef\u9009\u5339\u914d"))}),U=(n=Object(T["connect"])(function(e){var a=e.sobProduct,t=e.loading;return{sobProduct:a,loading:t.models.sobProduct}}),l=z["a"].create(),n(i=l((r=function(e){function a(e){var t;return y()(this,a),t=S()(this,v()(a).call(this,e)),t.defaultSearchForm={platform:"",skuId:"",title:"",category:[]},t.columns=[{title:"\u6211\u65b9\u5e73\u53f0",dataIndex:"platform",render:function(e,a,t){return V.a.createElement("span",{key:a.skuId+t},j["b"][e])}},{title:"\u4e00\u7ea7\u54c1\u7c7b",dataIndex:"categoryOne"},{title:"\u4e8c\u7ea7\u54c1\u7c7b",dataIndex:"categoryTwo"},{title:"\u4e09\u7ea7\u54c1\u7c7b",dataIndex:"categoryThree"},{title:"SPU",dataIndex:"spuId"},{title:"\u5546\u54c1ID",dataIndex:"skuId"},{title:"\u54c1\u724c",dataIndex:"brand"},{title:"\u5546\u54c1\u540d\u79f0",dataIndex:"title"},{title:"\u4f9b\u5e94\u65b9",dataIndex:"supplier"},{title:"\u91c7\u8d2d\u4eba\u5458",dataIndex:"purchaser"},{title:"\u6211\u65b9\u4ef7\u683c",dataIndex:"price"},{title:"\u6700\u4f4e\u5e73\u53f0",dataIndex:"leastPrice",render:function(e,a,t){return V.a.createElement(F["Fragment"],{key:"".concat(a.platform).concat(a.skuId).concat(t)},V.a.createElement("div",null,j["b"][e.platform]||j["a"][e.platform]),V.a.createElement("div",null,e.price),V.a.createElement("div",null,e.updateTime))}},{title:"\u4ef7\u683c\u7ade\u4e89\u529b",dataIndex:"advantage"},{title:"\u64cd\u4f5c",render:function(e,a,n){return V.a.createElement(F["Fragment"],{key:"operation".concat(n)},V.a.createElement(D["a"],{to:"/sob/product-detail/".concat(a.skuId)},V.a.createElement("span",null,"\u67e5\u770b")),a&&a.advantage&&0===a.advantage.length?V.a.createElement("a",{onClick:function(){return t.selectModal(a.skuId)},style:{marginLeft:"1em"}},"\u5339\u914d"):null)}}],t.init=function(){var e=t.props.dispatch;t.fetchList("1"),t.fetchList("0"),e({type:"sobProduct/fetchCascaderList"})},t.handleTabs=function(e){t.setState({mapping:e},function(){})},t.handlePageSize=function(e,a){var n=t.state.mapping;switch(n){case"0":t.setState({lonelyPage:1,lonelyPageSize:a},function(){t.fetchList(n)});break;case"1":t.setState({mappingPage:1,mappingPageSize:a},function(){t.fetchList(n)});break;default:}},t.handlePage=function(e){var a=t.state.mapping;switch(a){case"0":t.setState({lonelyPage:e},function(){t.fetchList(a)});break;case"1":t.setState({mappingPage:e},function(){t.fetchList(a)});break;default:}},t.fetchList=function(e){var a,n=t.props.dispatch,l=t.state,i=l.mappingPage,r=l.mappingPageSize,o=l.lonelyPage,c=l.lonelyPageSize,s=l.platform,d=l.skuId,p=l.title,m=l.category;switch(e){case"0":a={type:"sobProduct/fetchLonelyList",payload:{platform:s,skuId:d,title:p,category:m,page:o,limit:c,mapping:e}};break;case"1":a={type:"sobProduct/fetchMappingList",payload:{platform:s,skuId:d,title:p,category:m,page:i,limit:r,mapping:e}};break;default:}n(a)},t.selectModal=function(e){var a=t.props.dispatch;a({type:"sobProduct/fetchSelectList",payload:{params:{skuId:e},cb:function(){t.setState({modalVisible:!0})}}})},t.handleModalOk=function(e){var a=t.props.dispatch;a({type:"sobProduct/postSelectList",payload:{params:{productId:e},cb:function(){t.setState({modalVisible:!1})}}})},t.handleModalCancel=function(){t.setState({modalVisible:!1})},t.handleSubmitSearch=function(e){e.preventDefault();var a=t.props.form,n=t.state.mapping;a.validateFields(function(e,a){e||t.setState(h()({},a),function(){t.fetchList(n)})})},t.handleSearchReset=function(){var e=t.props.form;e.resetFields(),t.setState(t.defaultSearchForm)},t.state={platform:"",skuId:"",title:"",category:[],modalVisible:!1,mapping:"1",mappingPage:1,mappingPageSize:10,lonelyPage:1,lonelyPageSize:10},t}return L()(a,e),b()(a,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderSearchForm",value:function(){var e=this.props,a=e.form.getFieldDecorator,t=e.sobProduct.searchCascaderList;return V.a.createElement(z["a"],{onSubmit:this.handleSubmitSearch,layout:"inline"},V.a.createElement(C["a"],{gutter:{md:8,lg:24,xl:48}},V.a.createElement(u["a"],{md:5,sm:24},V.a.createElement(H,{label:""},a("platform",{initialValue:""})(V.a.createElement(x["a"],{placeholder:"\u9009\u62e9\u5e73\u53f0",style:{width:150}},V.a.createElement(B,{value:"XIAO_HEI_YU"},"\u5c0f\u9ed1\u9c7c"),V.a.createElement(B,{value:"HAO_HUO"},"\u597d\u8d27"))))),V.a.createElement(u["a"],{md:5,sm:24},V.a.createElement(H,{label:""},a("skuId",{initialValue:""})(V.a.createElement(m["a"],{placeholder:"\u5546\u54c1ID"})))),V.a.createElement(u["a"],{md:5,sm:24},V.a.createElement(H,{label:""},a("title",{initialValue:""})(V.a.createElement(m["a"],{placeholder:"\u5546\u54c1\u540d\u79f0"})))),V.a.createElement(u["a"],{md:5,sm:24},V.a.createElement(H,{label:""},a("category",{initialValue:""})(V.a.createElement(p["a"],{options:t,placeholder:"\u9009\u62e9\u4ea7\u54c1\u54c1\u7c7b",notFoundContent:"\u6ca1\u6709\u83b7\u53d6\u5230\u54c1\u7c7b\u6570\u636e",expandTrigger:"hover"})))),V.a.createElement(u["a"],{md:4,sm:24},V.a.createElement("span",{className:J.a.submitButtons},V.a.createElement(d["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),V.a.createElement(d["a"],{style:{marginLeft:8},onClick:this.handleSearchReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this.props.sobProduct,a=e.mappingList,t=e.mappingTotal,n=e.lonelyList,l=e.lonelyTotal,i=e.selectList,r=this.state,d=r.mappingPage,p=r.lonelyPage,m=r.modalVisible;return V.a.createElement(K["a"],{title:"\u5546\u54c1\u5339\u914d\u5217\u8868"},V.a.createElement(o["a"],{bordered:!1},V.a.createElement("div",{className:J.a.wrapper},V.a.createElement("div",{className:"searchForm"},this.renderSearchForm()),V.a.createElement(M["a"],{defaultActiveKey:"1",onChange:this.handleTabs},V.a.createElement(A,{tab:"\u5df2\u5339\u914d\u5546\u54c1",key:"1"},V.a.createElement(s["a"],{rowKey:"key",dataSource:a,columns:this.columns,pagination:!1}),V.a.createElement("div",{className:J.a.mappingPagination},V.a.createElement(c["a"],{current:d,defaultCurrent:1,defaultPageSize:10,total:t,showSizeChanger:!0,pageSizeOptions:["10","20","30","50"],onShowSizeChange:this.handlePageSize,onChange:this.handlePage,showQuickJumper:!0}))),V.a.createElement(A,{tab:"\u672a\u5339\u914d\u5546\u54c1",key:"0"},V.a.createElement(s["a"],{rowKey:"key",dataSource:n,columns:this.columns,pagination:!1}),V.a.createElement("div",{className:J.a.lonelyPagination},V.a.createElement(c["a"],{current:p,defaultCurrent:1,defaultPageSize:10,total:l,showSizeChanger:!0,pageSizeOptions:["10","20","30","50"],onShowSizeChange:this.handlePageSize,onChange:this.handlePage,showQuickJumper:!0})))),V.a.createElement(R,{modalVisible:m,selectList:i,handleModalOk:this.handleModalOk,handleModalCancel:this.handleModalCancel}))))}}]),a}(F["Component"]),i=r))||i)||i);a["default"]=U}}]);