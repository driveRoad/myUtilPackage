(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[39],{"3EIx":function(e,t,a){e.exports={wrapper:"antd-pro-pages-reports-cpindex-style-wrapper",lonelyPagination:"antd-pro-pages-reports-cpindex-style-lonelyPagination",mappingPagination:"antd-pro-pages-reports-cpindex-style-mappingPagination"}},JBgP:function(e,t,a){"use strict";a.r(t);a("IzEo");var n,r,l,i,c=a("bx4M"),o=(a("DjyN"),a("NUBc")),s=(a("g9YV"),a("wCAj")),d=(a("14J3"),a("BMrR")),p=(a("+L6B"),a("2/Rp")),m=(a("jCWc"),a("kPKH")),u=a("p0pE"),h=a.n(u),f=a("2Taf"),g=a.n(f),v=a("vZ4D"),C=a.n(v),y=a("l4Ni"),E=a.n(y),x=a("ujKo"),S=a.n(x),w=a("MhPg"),b=a.n(w),I=(a("y8nQ"),a("Vl3Y")),P=(a("OaEy"),a("2fM7")),R=(a("iQDF"),a("+eQT")),k=a("q1tI"),F=a.n(k),L=a("MuoO"),T=a("zHco"),z=a("3EIx"),D=a.n(z),N=R["a"].RangePicker,M=P["a"].Option,O=I["a"].Item,j=(n=Object(L["connect"])(function(e){var t=e.cpindex;return{cpindex:t}}),r=I["a"].create(),n(l=r((i=function(e){function t(e){var a;return g()(this,t),a=E()(this,S()(t).call(this,e)),a.defaultSearchForm={category:[],page:1,limit:20},a.columns=[{title:"\u65e5\u671f",dataIndex:"date"},{title:"\u7ade\u54c1\u5e73\u53f0",dataIndex:"competitor"},{title:"\u4e00\u7ea7\u7c7b\u76ee",dataIndex:"categoryOne"},{title:"\u4e8c\u7ea7\u7c7b\u76ee",dataIndex:"categoryTwo"},{title:"\u4e09\u7ea7\u7c7b\u76ee",dataIndex:"categoryThree"},{title:"SKU \u6570\u91cf",dataIndex:"skuCount"},{title:"\u5df2\u5339\u914d SKU \u6570\u91cf",dataIndex:"matchSkuCount"},{title:"\u7ade\u4e89\u529b\u6307\u6570",dataIndex:"cpIndex"},{title:"\u4f18\u52bf\u5360\u6bd4",dataIndex:"advantageRater"},{title:"\u52a3\u52bf\u5360\u6bd4",dataIndex:"disadvantageRater"},{title:"top1\u6bd4\u4f8b",dataIndex:"top1Rater"},{title:"\u4ef7\u683c\u4f18\u52bf\u7b49\u7ea7",dataIndex:"aboveCRate"},{title:"\u4ef7\u683c\u52a3\u52bf\u7b49\u7ea7",dataIndex:"belowCRate"}],a.init=function(){var e=a.props.dispatch;a.fetchList(),e({type:"cpindex/fetchCascaderList"}),e({type:"cpindex/fetchCompetitorList"})},a.fetchList=function(){var e=a.props.dispatch,t=a.state.params;e({type:"cpindex/cpindex",payload:h()({},t)})},a.handlePageSize=function(e,t){var n=a.state.params;a.setState({params:h()({},n,{page:1,limit:t})},function(){a.fetchList()})},a.handlePage=function(e){var t=a.state.params;a.setState({params:h()({},t,{page:e})},function(){a.fetchList()})},a.handleSubmitSearch=function(e){e.preventDefault();var t=a.props.form,n=a.state,r=n.c1,l=n.c2,i=n.c3,c=n.params;t.validateFields(function(e,t){if(!e){var n=[];r&&n.push(r),l&&n.push(l),i&&n.push(i);var o=t.timeRange&&t.timeRange[0],s=t.timeRange&&t.timeRange[1];a.setState({params:h()({},c,t,{category:n,page:1,startTime:o,endTime:s})},function(){a.fetchList()})}})},a.handleC1Change=function(e){a.setState({c1:e,c2:null,c3:null});var t=a.props.form;t.setFieldsValue({c2:void 0,c3:void 0})},a.handleC2Change=function(e){a.setState({c2:e,c3:null});var t=a.props.form;t.setFieldsValue({c3:void 0})},a.handleC3Change=function(e){a.setState({c3:e})},a.handleSearchReset=function(){var e=a.props.form;e.resetFields(),a.setState({params:a.defaultSearchForm,c1:null,c2:null,c3:null})},a.state={params:{page:1,limit:20,startTime:"",endTime:"",category:["0"],businessType:"",competitor:""},c1:"",c2:"",c3:""},a}return b()(t,e),C()(t,[{key:"componentDidMount",value:function(){this.init()}},{key:"renderC2",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.cpindex.searchCascaderList,n=this.state.c1,r=a.find(function(e){return n===e.value});return r?F.a.createElement(m["a"],{md:5,sm:24},F.a.createElement(O,{label:""},t("c2",{})(F.a.createElement(P["a"],{allowClear:!0,placeholder:"\u4e8c\u7ea7\u7c7b\u76ee",onChange:this.handleC2Change,style:{width:150}},a.find(function(e){return n===e.value}).children.map(function(e){return F.a.createElement(M,{value:e.value},e.label)}))))):null}},{key:"renderC3",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.cpindex.searchCascaderList,n=this.state,r=n.c1,l=n.c2,i=a.find(function(e){return r===e.value});if(!i)return null;console.log(i);var c=i.children.find(function(e){return l===e.value});return c&&c.children&&0!==c.children.length?(c.children&&c.children[0]&&c.children[0].value>0&&c.children.unshift({value:"0",label:"\u5168\u90e8",parentCode:"0"}),F.a.createElement(m["a"],{md:5,sm:24},F.a.createElement(O,{label:""},t("c3",{})(F.a.createElement(P["a"],{allowClear:!0,placeholder:"\u4e09\u7ea7\u7c7b\u76ee",onChange:this.handleC3Change,style:{width:150}},c.children.map(function(e){return F.a.createElement(M,{value:e.value},e.label)})))))):null}},{key:"renderSearchForm",value:function(){var e=this.props,t=e.form.getFieldDecorator,a=e.cpindex,n=a.searchCascaderList,r=a.competitorList,l=this.state,i=l.c1,c=l.c2;return F.a.createElement(I["a"],{onSubmit:this.handleSubmitSearch,layout:"inline"},F.a.createElement(d["a"],{gutter:{md:8,lg:24,xl:48}},F.a.createElement(m["a"],{md:5,sm:24},F.a.createElement(O,{label:""},t("timeRange",{})(F.a.createElement(N,{style:{width:"100%"}})))),F.a.createElement(m["a"],{md:5,sm:24},F.a.createElement(O,{label:""},t("c1",{})(F.a.createElement(P["a"],{allowClear:!0,placeholder:"\u4e00\u7ea7\u7c7b\u76ee",onChange:this.handleC1Change,style:{width:150}},n.map(function(e){return F.a.createElement(M,{value:e.value},e.label)}))))),i&&this.renderC2(),c&&this.renderC3(),F.a.createElement(m["a"],{md:5,sm:24},F.a.createElement(O,{label:""},t("competitor",{})(F.a.createElement(P["a"],{allowClear:!0,placeholder:"\u7ade\u54c1\u5e73\u53f0",style:{width:150}},r.map(function(e){return F.a.createElement(M,{value:e.siteName},e.sitePlatform)}))))),F.a.createElement(m["a"],{md:4,sm:24},F.a.createElement("span",{className:D.a.submitButtons},F.a.createElement(p["a"],{type:"primary",htmlType:"submit"},"\u67e5\u8be2"),F.a.createElement(p["a"],{style:{marginLeft:8},onClick:this.handleSearchReset},"\u91cd\u7f6e")))))}},{key:"render",value:function(){var e=this.props.cpindex,t=e.total,a=e.list,n=this.state.params.page;return F.a.createElement(T["a"],{title:"\u7ade\u4e89\u529b\u6570\u636e"},F.a.createElement(c["a"],{bordered:!1},F.a.createElement("div",{className:D.a.wrapper},F.a.createElement("div",{className:"searchForm"},this.renderSearchForm()),F.a.createElement(s["a"],{rowKey:"key",dataSource:a,columns:this.columns,pagination:!1}),F.a.createElement("div",{className:D.a.lonelyPagination},F.a.createElement(o["a"],{current:n,defaultCurrent:1,defaultPageSize:20,total:t,showSizeChanger:!0,pageSizeOptions:["10","20","30","50"],onShowSizeChange:this.handlePageSize,onChange:this.handlePage,showQuickJumper:!0})))))}}]),t}(k["Component"]),l=i))||l)||l);t["default"]=j}}]);